<div class="_magicBook">
    <div class="_itemList">

        {{#if isGM}}
        <div class="_header">
            <a class="_frameButton _openCompendium" 
                data-action="compendium"
                data-itemid="books">
                <button>{{localize 'common.openCompendium'}}</button>
            </a>
        </div>
        {{/if}}
    
        {{#if backMagic.noItems}}
        <label class="_info">{{localize 'info.noItems'}}</label>
        {{/if}}

        {{#each backMagic.books as |book index|}}
        <div class="_item">
            <a class="_frameButton _mainItemWrap" 
               data-action="showItem"
               data-itemid="{{book.book._id}}">
            <div class="_mainItem">
                <img class="_itemImg" src="{{book.book.img}}">
                <div class="_itemBody">
                    <div class="_title">{{book.book.name}}</div>
                    <div class="_properties">
                        <label>{{localize 'common.language'}}: <span class="_bold">{{book.language}}</span> ({{book.languageSkill}} %)</label>
                        <label>{{localize 'common.teach'}}: <span class="_bold">{{book.teach}} %</span></label>
                    </div>
                </div>
            </div>
            </a>            
            <div class="_utils">
                <a class="_frameButton _big" 
                    data-action="deleteItem"
                    data-itemid="{{book.book._id}}">
                    <button data-img="icons/delete.svg" 
                            data-icon="true"
                            data-tooltip="{{localize 'common.delete'}}"></button>
                </a>
            </div>
        </div>
            {{#each book.spells as |spell index2|}}
            <div class="_item _spell">
                <a class="_frameButton _mainItemWrap" 
                   data-action="showItem"
                   data-itemid="{{spell._id}}">
                <div class="_mainItem">
                    <img class="_itemImg" src="{{spell.img}}">
                    <div class="_itemBody">
                        <div class="_title">{{spell.name}}</div>                     
                        <div class="_properties">
                            <label>{{localize 'common.vis'}}: <span class="_bold">{{spell.system.level}} 
                                ({{localizeBy 'spell.vis' spell.system.level}})</span></label>                            
                            <label>{{localize 'common.status'}}: <span class="_bold {{#unless spell.system.learned}}_red{{/unless}}">
                                {{#if spell.system.learned}} {{localize 'common.learnedM'}}
                                                    {{else}} {{localize 'common.learnedS'}}{{/if}}</span>
                            </label>                              
                        </div>
                    </div>
                </div>
                </a>            
                <div class="_utils">
                    {{#if ../../isGM}}
                    <a class="_frameButton _big" 
                        data-action="deleteItem"
                        data-itemid="{{spell._id}}">
                        <button data-img="icons/delete.svg" 
                                data-icon="true"
                                data-tooltip="{{localize 'common.delete'}}"></button>
                    </a>
                    {{/if}}
                </div>
            </div>                
            {{/each}}
        {{/each}}

    </div>
</div>