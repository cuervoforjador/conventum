<div class="_magicStudy">

    {{!-- WAITING FOR STUDY... ---}}
    {{#unless systemData.magic.study.learning}}
    <a class="_frameButton"
        data-action="learnOrdo">
        <div class="_still">
            <info>{{localize 'info.stillNoLearningTheo'}}</info>
        </div>
    </a>
    {{else}}

        {{#if backMagic.study.vis}}
        <div class="_still">
            <info>{{localize 'info.studyingSpells'}}</info>
        </div>    
        {{else}}

            {{!-- TITLE ---}}
            <div class="_title">
                <div class="_combo _90">
                    <label>{{localize 'common.learning'}}: {{backMagic.study.ordoName}}</label>
                    <label class="_bold">{{backMagic.study.ordoName}}</label>
                </div>
                <div class="_utils">
                    <a class="_frameButton _big" 
                        data-action="unlearning"
                        data-itemid="{{item._id}}">
                        <button data-img="icons/delete.svg" 
                                data-icon="true"
                                data-tooltip="{{localize 'info.unlearn'}}"></button>
                    </a>
                </div>        
            </div>

            {{!-- PROGRESS ---}}
            <div class="_progress">

                {{#if backMagic.study.showChannelButton}}
                <div class="_row">
                    <label>{{localize 'common.theology'}}: </label>
                    <label class="_bold">{{backMagic.properties.theology}}%</label>                    
                    <label> / {{localize 'common.theoMin'}}: </label>
                    <label class="_bold">{{backMagic.study.spellProp.skillMin}}%</label>
                </div>
                <div class="_row">
                    <label>{{localize 'common.experience'}}: </label>
                    <label class="_bold">{{backMagic.study.experience}} / {{backMagic.properties.experience}}</label>
                </div>
                {{/if}}
                {{#if backMagic.study.showLearnProgress}}
                <div class="_studyBar">
                    <input type="range" 
                        name="system.magic.study.learnedMonths"
                        min="0" 
                        max="{{backMagic.study.learnMonthsMax}}" 
                        value="{{systemData.magic.study.learnedMonths}}" 
                        class="slider">
                    <label>{{systemData.magic.study.learnedMonths}} / {{backMagic.study.learnMonthsMax}} {{localize 'common.months'}}</label>
                </div>
                {{/if}}
                {{#if backMagic.study.showMemory}}
                <div class="_memory">
                    <label class="_name">{{localize 'characteristics.rr'}}</label>
                    <label class="_irr">{{backMagic.properties.rr}} {{backMagic.study.spellProp.mod}} = {{backMagic.study.rrRoll}}</label>
                    <label>%</label>            
                    <a class="_frameButton" 
                        data-action="roll"
                        data-target="study"
                        data-subtarget="memory"
                        data-ordolevel="{{systemData.magic.study.ordoId}}"
                        data-actorid="{{actor.id}}"
                        data-tokenid="{{tokenId actor}}"
                        data-rollbase="{{backMagic.study.rrRoll}}"
                        data-rollvalue="{{backMagic.study.rrRoll}}"
                        data-rolltitle="{{localize 'common.memorize'}}"
                        data-nohelps="true">
                        <button>{{localize 'common.memorize'}}</button>
                    </a>
                </div>
                {{/if}}                
            </div>            


            {{!-- STEPS ---}}
            <div class="_steps">
                <div class="_channel">
                    {{#if systemData.magic.study.channeled}} 
                        <label class="_done">{{localize 'common.channel'}}</label>
                    {{else}}
                        {{#if backMagic.study.showChannelButton}}
                            <a class="_frameButton" 
                                data-action="channelordo"
                                data-level="{{systemData.magic.study.ordoId}}">
                                <button>{{localize 'common.channel'}}</button>
                            </a>
                        {{else}}
                            <label class="_lighted">{{localize 'common.channel'}}</label>
                        {{/if}}
                    {{/if}}
                </div>
                <div class="_learn">
                    {{#if systemData.magic.study.learned}} 
                        <label class="_done">{{localize 'common.studying'}}</label>
                    {{else}}
                        {{#if backMagic.study.showLearnProgress}}
                            <label class="_doing">{{localize 'common.studying'}}</label>
                        {{else}}
                            <label class="_lighted">{{localize 'common.studying'}}</label>
                        {{/if}}
                    {{/if}}
                </div>
                <div class="_memorize">
                    {{#if systemData.magic.study.memorized}} 
                        <label class="_done">{{localize 'common.memorize'}}</label>
                    {{else}}
                        {{#if backMagic.study.showMemory}}
                            <label class="_doing">{{localize 'common.memorize'}}</label>
                        {{else}}
                            <label class="_lighted">{{localize 'common.memorize'}}</label>
                        {{/if}}             
                    {{/if}}
                </div>                                
            </div>


        {{/if}}


    {{/unless}}
</div>


