import{helperSheets as e}from"./helperSheets.js";import{helperUtils as t}from"./helperUtils.js";export class helperWindowSheets{static afterWindowRender(e){let t=$(e.form),i=t.parents(".window-app.actor");i.addClass("_window");let o={const:{width:500,height:600},absolute:{width:$("#interface").innerWidth()-$("#interface #sidebar").outerWidth(),height:$("#interface").innerHeight()},width:i.outerWidth(),height:i.outerHeight()};this.hideHeaderTexts(e),this.addWindowHeaderButton(e);let n=o.const.width>o.absolute.width?o.absolute.width:o.const.width,d=o.const.height>o.absolute.height?o.absolute.height:o.const.height;i[0].style.setProperty("--minWidth",n.toString()+"px"),i[0].style.setProperty("--minHeight",d.toString()+"px"),t[0].style.setProperty("--vSize",t.height().toString()+"px"),t[0].style.setProperty("--hSize",t.width().toString()+"px"),t[0].style.setProperty("--fSize",game.settings.get(game.system.id,"fontSize"))}static hideHeaderTexts(e){let t=$(e.form),i=t.parents(".window-app.actor");i.find(".window-header a.control").each(function(e,t){$(t).contents().each(function(e,t){"#text"===t.nodeName&&t.remove()})})}static addWindowHeaderButton(e){let t=$(e.form),i=t.parents(".window-app.actor"),o=i.find(".window-header .window-title");if(i.find(".window-header a.control._changeReduced").length>0)return;let n=`<a class="header-button control changeReduced _changeReduced" 
                data-tooltip="${game.i18n.localize("info.changeReduced")}">
                <i class="fas fa-address-book"></i>
             </a>`;o.length>0?o.after(n):i.find(".window-header").prepend()}static async clickReduced(e){this.actor.update({"system.control.view.window":!this.actor.system.control.view.window})}}