import{helperUtils as e}from"./helperUtils.js";import{helperSocket as t}from"./helperSocket.js";export class helperFolders{static async checkTraits(e,t,a){if(!e.collection.index)return;let n=Array.from(e.collection.index).filter(e=>"trait"===e.type);if(0===n.length)return;let s=await game.packs.get(a.collection.metadata?.id);if(!s)return;let i=await s.getDocuments();n.map(e=>{let a=$(t).find('li[data-entry-id="'+e._id+'"]'),n=i.find(t=>t.id===e._id);n&&(a.attr("data-from",n.system.range.from),a.addClass("_packTrait"),a.parent().addClass("sortBySmall"),a.find("h4.entry-name").append(`<div class="_small"><label>${n.system.range.from?n.system.range.from:""} - ${n.system.range.to?n.system.range.to:""}</label></div>`),a.find("h4.entry-name").append(`<div class="_sticker">
                <label class="${n.system.extend.pride?"_green":n.system.extend.shame?"_red":n.system.extend.sequel?"_yellow":"_white"}">
                    ${n.system.extend.pride?game.i18n.localize("common.pride"):n.system.extend.shame?game.i18n.localize("common.shame"):n.system.extend.sequel?game.i18n.localize("common.sequel"):game.i18n.localize("common.neutre")}
                </label>
            </div>`),a.find("h4.entry-name").append(`<div class="_points"><label>${n.system.extend.points} pt.</label></div>`))}),$(t).find("ol.subdirectory.sortBySmall").each(function(e,t){$(t).find("li").sort(function e(t,a){let n=$(t).find("h4.entry-name a").text(),s=$(a).find("h4.entry-name a").text();return n.toUpperCase()<s.toUpperCase()?1:-1}).appendTo($(t)),$(t).find("li").sort(function e(t,a){let n=$(t).data("from")?$(t).data("from"):1e3;return Number($(a).data("from")?$(a).data("from"):1e3)<Number(n)?1:-1}).appendTo($(t))})}}