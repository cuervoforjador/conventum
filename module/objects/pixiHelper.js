export class pixiHelper{static assets(){return"/systems/"+game.system.id+"/assets/"}static styles(){return"/systems/"+game.system.id+"/styles/"}static async spriteTex(e,t=null,r=null,i=null,l=null){let o=PIXI.Texture.from(this.assets()+"pixiBase/"+e,{resourceOptions:{autoLoad:!1}});await o.baseTexture.resource.load();let s=new PIXI.Sprite(o);return t&&(s.width=t),r&&(s.height=r),i&&(s.x=i),l&&(s.y=l),s}static spriteRounded(e,t,r,i=16777215,l=.25){let o=new PIXI.Graphics().beginFill(i).drawRect(0,0,e,t).lineStyle(0).endFill(),s=r.generateTexture(o),a=new PIXI.Sprite(s);return a.width=e,a.height=t,a.filters=[new PIXI.AlphaFilter(l)],a}static spriteCircle(e,t,r=1,i={color:16777215,alpha:1},l={width:0,color:16777215,alpha:1}){let o=new PIXI.Graphics().beginFill(i.color,i.alpha).drawCircle(0,0,e).lineStyle(l.width,l.color,l.alpha,1).endFill(),s=t.generateTexture(o),a=new PIXI.Sprite(s);return a.x=-e-l.width,a.y=-e-l.width,a.width=2*e+2*l.width,a.height=2*e+2*l.width,1!=r&&(a.filters=[new PIXI.AlphaFilter(.25)]),a}static spriteArc(e,t,r,i,l,o=16777215,s=1){return new PIXI.Graphics().lineStyle(t-e-l,o,s,1).arc(0,0,e+l/2,r-Math.PI/2,i-Math.PI/2)}static spriteLine(e,t,r,i,l=1,o=16777215,s=1){return new PIXI.Graphics().lineStyle(l,o,s).moveTo(e,t).lineTo(r,i)}static spriteDegLine(e,t,r,i,l=1,o=16777215,s=1){return new PIXI.Graphics().lineStyle(l,o,s).moveTo(e*Math.cos(t-Math.PI/2),e*Math.sin(t-Math.PI/2)).lineTo(r*Math.cos(i-Math.PI/2),r*Math.sin(i-Math.PI/2))}static spriteText(e,t="#FFFFFF",r="#000000",i=2,l=18,o="lighter",s="#000000",a=6,n="almendra",d=!0,$=1.25,c="left"){let F=null;return(F=0!=a?new PIXI.Text(e,new PIXI.TextStyle({align:c,dropShadow:!0,dropShadowAlpha:.8,dropShadowAngle:0,dropShadowBlur:a,dropShadowColor:s,dropShadowDistance:0,fill:t,fontFamily:n,fontSize:l,fontWeight:o,lineHeight:l*$,stroke:r,strokeThickness:i,wordWrap:d})):new PIXI.Text(e,new PIXI.TextStyle({align:c,fill:t,fontFamily:n,fontSize:l,fontWeight:o,lineHeight:l*$,stroke:r,strokeThickness:i,wordWrap:d}))).anchor.set(.5),F}static spriteClick(e,t){e.interactive=!0,e.cursor="pointer",e.on("click",t)}static maskTransparent(e,t){let r=new PIXI.Container;return r.addChild(e),r.addChild(t),r.mask=t,r}static haloShadow(e,t=16777215,r=1,i=3.5){e.filters||(e.filters=[]),e.filters.push(new PIXI.filters.DropShadowFilter({alpha:r,color:t,blur:i}))}static haloAnimate(e,t,r,i=.03,l=16777215,o=1,s=3.5){t[r]=new PIXI.Ticker,e.filters||(e.filters=[]),e.filters.push(new PIXI.filters.DropShadowFilter({alpha:o,color:l,blur:s}));let a=1;t[r].add(t=>{a-=i,e.filters&&(e.filters[e.filters.length-1].alpha=Math.abs(o*Math.sin(a))>.15?Math.abs(o*Math.sin(a)):.15,e.filters[e.filters.length-1].blur=5*Math.abs(Math.sin(a)))}),t[r].start()}static _toArc(e,t){return(e=(e=isNaN(Number(e))?0:Number(e))>(t=isNaN(Number(t))?100:0===Number(t)?100:Number(t))?t:e<0?0:e)*(2*Math.PI/t)}static async drawSmokeTexture(e,t,r,i,l=0,o=0,s=16777215,a=100,n=.5){let d=new PIXI.Container;e.addChild(d);let $=PIXI.Texture.from(this.assets()+"pixiBase/smoke.png",{resourceOptions:{autoLoad:!1}});await $.baseTexture.resource.load();let c=[];for(let F=0;F<a;F++){let u=new PIXI.Sprite($);u.position.set(l+Math.random()*r,o+Math.random()*i),u.anchor.set(.5),u.rotation=360*Math.random(),u.alpha=.5,u.blendMode=PIXI.BLEND_MODES.SCREEN,u.tint=s,u._speed=(h(0,100)-50)/1e4,d.addChild(u),c.push(u)}function h(e,t){return Math.floor(Math.random()*(t-e)+1)+e}t.smokeBackground=new PIXI.Ticker,t.smokeBackground.speed=n,t.smokeBackground.add(e=>{(function e(t){let r=c.length;for(;r--;){let i=c[r]._speed;c[r].rotation+=t*i}})(e)}),t.smokeBackground.start()}static colorMatrix(e,t,r=.02){t.colorMatrix=new PIXI.Ticker,t.colorMatrix.speed=.5,t.colorMatrix.add(t=>{var l;let o;l=t,o=new PIXI.filters.ColorMatrixFilter,i+=r*l,o.predator(1,1),o.alpha=Math.abs(.085*Math.sin(i)),e.filters=[o]});let i=0;t.colorMatrix.start()}static godRays(e,t,r=.01){t.godRays=new PIXI.Ticker,t.godRays.speed=3,t.godRays.add(t=>{var l;let o;l=t,o=new PIXI.filters.GodrayFilter,i+=r,o.time=i,o.gain=.5+Math.abs(.5*Math.sin(o.time*Math.PI)),e.filters=[o]});let i=0;t.godRays.start()}static zoomBlurOUT(e,t,r,i,l=.02,o){t.zoomBlurOUT=new PIXI.Ticker,t.zoomBlurOUT.speed=.5,t.zoomBlurOUT.add(n=>{var d;d=n,s+=l*d,e.filters=[new PIXI.filters.ZoomBlurFilter({strength:s,center:[r.x,r.y],innerRadius:1.5*i,radius:-1})],t.zoomBlurOUT.effectStrength=s,s>3.5&&!a&&(o(),a=!0)});let s=0,a=!1;t.zoomBlurOUT.start()}static zoomBlurIN(e,t,r,i,l=.02,o){if(!t.zoomBlurOUT)return;let s=t.zoomBlurOUT.effectStrength,a=1.5*i;s=s>3.5?3.5:s||.1,t.zoomBlurOUT.stop(),t.zoomBlurOUT.destroy(),t.zoomBlurOUT=null,delete t.zoomBlurOUT,t.zoomBlurIN=new PIXI.Ticker,t.zoomBlurIN.speed=.5,t.zoomBlurIN.add(i=>{var n;n=i,s-=l*n,a+=100*l*n,e.filters=[new PIXI.filters.ZoomBlurFilter({strength:s,center:[r.x,r.y],innerRadius:a,radius:-1}),new PIXI.filters.AlphaFilter(s/3.5)],s<0&&(o(),t.zoomBlurIN.stop(),t.zoomBlurIN.destroy(),t.zoomBlurIN=null,e.filters=[])}),t.zoomBlurIN.start()}}